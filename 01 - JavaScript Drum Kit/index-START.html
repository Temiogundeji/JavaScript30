<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>JS Drum Kit</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="keys">
      <div data-key="65" class="key">
        <kbd>A</kbd>
        <span class="sound">clap</span>
      </div>
      <div data-key="83" class="key">
        <kbd>S</kbd>
        <span class="sound">hihat</span>
      </div>
      <div data-key="68" class="key">
        <kbd>D</kbd>
        <span class="sound">kick</span>
      </div>
      <div data-key="70" class="key">
        <kbd>F</kbd>
        <span class="sound">openhat</span>
      </div>
      <div data-key="71" class="key">
        <kbd>G</kbd>
        <span class="sound">boom</span>
      </div>
      <div data-key="72" class="key">
        <kbd>H</kbd>
        <span class="sound">ride</span>
      </div>
      <div data-key="74" class="key">
        <kbd>J</kbd>
        <span class="sound">snare</span>
      </div>
      <div data-key="75" class="key">
        <kbd>K</kbd>
        <span class="sound">tom</span>
      </div>
      <div data-key="76" class="key">
        <kbd>L</kbd>
        <span class="sound">tink</span>
      </div>
    </div>

    <audio data-key="65" src="sounds/clap.wav"></audio>
    <audio data-key="83" src="sounds/hihat.wav"></audio>
    <audio data-key="68" src="sounds/kick.wav"></audio>
    <audio data-key="70" src="sounds/openhat.wav"></audio>
    <audio data-key="71" src="sounds/boom.wav"></audio>
    <audio data-key="72" src="sounds/ride.wav"></audio>
    <audio data-key="74" src="sounds/snare.wav"></audio>
    <audio data-key="75" src="sounds/tom.wav"></audio>
    <audio data-key="76" src="sounds/tink.wav"></audio>

    <script>
      let allKeys = Array.from(document.querySelectorAll(`.key`));
      function removeTransition(e) {
        if (!e.target.classList.contains("playing")) return;
        e.target.classList.remove("playing");
      }
      document.addEventListener("keydown", (e) => {
        let currentKey = document.querySelector(`div[data-key="${e.keyCode}"]`);
        let currentAudio = document.querySelector(
          `audio[data-key="${e.keyCode}"]`
        );
        if (!currentAudio) return;
        currentAudio.currentTime = 0;
        currentKey.classList.add("playing");
        currentAudio.play();
      });

      allKeys.forEach((key) => {
        key.addEventListener("transitionend", removeTransition);
      });

      //remove animation from the current buttion
      // function removeTransition(e) {
      //   if (e.propertyName !== "transform") return;
      //   e.target.classList.remove("playing");
      // }

      // const keys = Array.from(document.querySelectorAll(".key"));

      // function playAudio(e) {
      //   let currentAudio = document.querySelector(
      //     `audio[data-key="${e.keyCode}"]`
      //   );
      //   let currentKey = document.querySelector(`div[data-key="${e.keyCode}"]`);

      //   currentKey.classList.add("playing");
      //   if (!currentAudio) return;
      //   currentAudio.currentTime = 0;
      //   currentAudio.play();
      // }

      // document.addEventListener("keydown", (e) => {
      //   playAudio(e);
      // });

      // keys.forEach((key) => {
      //   key.addEventListener("transitionend", removeTransition);
      // });
    </script>
    <style>
      /* Define the flash animation */
      @keyframes flashBoxShadow {
        0% {
          box-shadow: 0px 4px 15px rgba(255, 187, 0, 0.881);
        }
        100% {
          box-shadow: none;
        }
      }

      .element {
        /* Initially no shadow */
        box-shadow: none;
        /* Set up animation but keep it paused initially */
        animation: flashBoxShadow 0.3s ease-out forwards;
      }
    </style>
  </body>
</html>
